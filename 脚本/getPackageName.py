from androguard.core.bytecodes.apk import APK
import os

package_names={}

def get_name(path,apkname):
	global package_names
	apkpath=path+'/'+apkname
	if (apkpath[-3:]=='apk'):
		try:
			apk=APK(apkpath)
			package_names[apkname]=apk.get_package()
		except Exception as e:
			print(apkpath)
		
		

def write():
	global package_names
	f=open("api_names.txt",'w')
	for key,value in package_names.items():
		f.write(str(key)+"\n"+str(value)+"\n")
	f.close()



for p,d,f in os.walk('data'):
	if p.split('/')[-1][0]=='v':
		for file in f:
			get_name(p,file)
			
write()
